# Проект API YaMDb
![push](https://github.com/Andrey11995/yamdb_final/actions/workflows/workflow.yml/badge.svg?event=push)
## Описание:

### Проект YaMDb собирает отзывы пользователей на произведения. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку. Произведениям могут быть присвоены жанры и категории из списка предустановленных. Пользователи оставляют к произведениям отзывы и ставят оценку в диапазоне от одного до десяти, из оценок формируется рейтинг произведения. На одно произведение пользователь может оставить только один отзыв.

## Наполнение env-файла:

- SECRET_KEY - секретный ключ Django;
- DEBUG - 1 - вкл, 0 - выкл;
- ALLOWED_HOSTS - список доступных хостов через запятую без пробела (localhost,127.0.0.1);
- POSTGRES_USER - логин для подключения к БД;
- POSTGRES_PASSWORD - пароль для подключения к БД;
- POSTGRES_DB - название базы данных;
- DB_HOST - название сервиса (контейнера);
- DB_PORT - порт для подключения к БД;


## Как запустить проект в контейнерах:

Клонировать репозиторий и перейти в директорию с файлом docker-compose.yaml:

```
git clone https://github.com/Andrey11995/yamdb_final
```

```
cd yamdb_final/infra/
```

Создать файл .env и наполнить его данными:

```
touch .env && nano .env
```

Запустить Docker-compose:

```
docker-compose up -d --build
```
Проект развернут и запущен, миграции, сборка статики и наполнение БД автоматизированы


### Создание суперпользователя:

```
docker-compose exec web python manage.py createsuperuser
```
Ввести почту, логин, имя, фамилию и пароль.

>❗️Внимание❗️ Команда выполняется только из директории, содержащей файл docker-compose.yml


## Алгоритм регистрации пользователей

1. Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт /api/v1/auth/signup/.
2. YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
3. Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
4. При желании пользователь отправляет PATCH-запрос на эндпоинт /api/v1/users/me/ и заполняет поля в своём профайле (описание полей — в документации).


## Технологии

- Python 3.7
- Django REST Framework
- React
- PostgreSQL, SQLite (для тестов)
- Pytest
- Docker
- Nginx
- Gunicorn
- Github Workflow
